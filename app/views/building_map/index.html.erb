<div class="accordion accordion-flush" id="routingInput">
	<div class="accordion-item">
		<h2 class="accordion-header" id="headingOne">
			<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
				data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
				<i class="fas fa-directions directions-icon"></i>
			</button>
		</h2>
		<div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne"
			data-bs-parent="#routingInput">
			<div class="accordion-body">
				<form class="row gy-2 gx-3 align-items-center" autocomplete="off">
					<div class="col-auto">
						<div class="input-group">
							<div class="input-group-text"><i class="fas fa-map-marker-alt route-start-icon"></i></div>
							<input name='start' type="text" class="form-control" list="fromOptions" id="inputRoutingTo"
								placeholder="From">
						</div>
					</div>
					<div class="col-auto">
						<div class="input-group">
							<div class="input-group-text"><i class="fas fa-map-marker-alt route-end-icon"></i></div>
							<input name='dest' type="text" class="form-control" list="toOptions" id="inputRoutingTo"
								placeholder="To">
						</div>
					</div>
					<div class="col-auto">
						<button type="submit" formaction="/building_map" class="btn btn-primary">Go</button>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>

<datalist id="fromOptions">
	<option>Your location</option>
	<%= Places::DESTINATIONS.each do |dest, coords| %>
		<option>
			<%= "#{dest}" %>
		</option>
		<% end %>
</datalist>
<datalist id="toOptions">
	<%= Places::DESTINATIONS.each do |dest, coords| %>
		<option>
			<%= "#{dest}" %>
		</option>
		<% end %>
</datalist>
<br>

<%= map(
    center: {
        # HPI coordinates
        latlng: RoutingHelper.center(@start),
        zoom: 17,
    },
    polygons: BuildingMapHelper.leaflet_polygons(),
    polylines: BuildingMapHelper.leaflet_polylines(@route),
    markers: BuildingMapHelper.leaflet_markers(@route))
%>
